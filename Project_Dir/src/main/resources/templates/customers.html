<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <title>Title</title>
    <div th:replace="fragments/components :: head"></div>
</head>
<body>
<footer th:replace="fragments/components :: navbar"></footer>


<div class="container body-content">
    <div class="page-header">
        <label class="heading"><h1>All Customers</h1></label>
        <div class="form-group">
            <fieldset>
                <div class="table-responsive">
                        <table id="customers-table" class="table table-striped table-bordered display" cellspacing="0"
                               width="100%">
                            <thead>
                            <tr>

                                <th>Name</th>
                                <th>Email</th>
                                <th>Phone</th>
                                <th></th>
                                <th></th>

                            </tr>
                            </thead>
                            <tbody>
                            <tr th:each="customer : ${allCustomers}">

                                <td th:text="${customer.getName()}"></td>
                                <td th:text="${customer.getEmail()}"></td>
                                <td th:text="${customer.getPhone()}"></td>
                                <td>
                                    <button class="btn btn-outline-secondary" title="View Cars"
                                            id="view-cars"
                                            th:onclick="|viewCars()|">
                                        <i class="fas fa-car"></i> View all cars
                                    </button>
                                </td>
                                <td>
                                    <button class="btn btn-danger" title="Delete User"
                                            id="delete-user">
                                        <i class="fas fa-trash-alt"></i> Delete User
                                    </button>
                                </td>

                            </tr>
                            </tbody>
                        </table>
                    </div>

                <button class="btn btn-success" id="add-user-button" onclick="addUser()">Add User</button>
            </fieldset>
        </div>
        <hr/>
    </div>
</div>


<!-- Add User Modal -->
<!--<div id="add-user-modal" class="modal fade">-->
<!--<div class="modal-dialog" role="document">-->
<!--<div class="modal-content">-->
<!--<div class="modal-header">-->

<!--<h1 class="modal-title" id="add-modal-title">Add New User</h1>-->
<!--<button type="button" class="close" data-dismiss="modal">&times;</button>-->
<!--</div>-->

<!--<div class="modal-body">-->
<!--<form id="add-procedure-form" th:action="@{/procedures}" th:object="${procedure}" method="post">-->

<!--<div class="form-group">-->
<!--<label class="control-label">Procedure Name</label>-->
<!--<div>-->
<!--<input type="text" class="form-control input-lg" id="procedure-name-input" minlength="3"-->
<!--maxlength="45"-->
<!--required th:field="*{procedureName}">-->
<!--<small id="nameHelpBlock" class="form-text text-muted">-->
<!--Procedure name must be 3-45 characters long.-->
<!--</small>-->
<!--</div>-->
<!--</div>-->

<!--<div class="form-group">-->
<!--<label class="control-label">Procedure Price</label>-->
<!--<div class="input-group mb-3">-->
<!--<div class="input-group-prepend">-->
<!--<span class="input-group-text">$</span>-->
<!--</div>-->
<!--<input type="number" class="form-control" aria-label="Amount(to the nearest dollar)"-->
<!--id="procedure-price-input"-->
<!--minlength="0"-->
<!--maxlength="5" required th:field="*{procedurePrice}">-->
<!--</div>-->
<!--<small id="priceHelpBlock" class="form-text text-muted">-->
<!--Price must contain only digits.-->
<!--</small>-->
<!--</div>-->

<!--<div class="modal-footer">-->
<!--<div class="form-group">-->
<!--<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>-->
<!--<button type="submit" class="btn btn-success">Submit</button>-->
<!--</div>-->
<!--</div>-->
<!--</form>-->

<!--</div>-->
<!--</div>-->
<!--</div>-->
<!--</div>-->


<!--View Cars Modal-->
<div class="modal fade" id="view-cars-modal" role="dialog">
    <div class="modal-dialog modal-xlg">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title" align="center">Cars of user:<span id="cars-header"></span></h4>
            </div>
            <div class="modal-body" align="center">
                <div class="table-responsive">
                    <table id="cars-table" class="table table-striped table-bordered display">
                        <thead>
                        <tr>
                            <th>Make</th>
                            <th>Model</th>
                            <th>Year</th>
                            <th>License Plate</th>
                            <th>VIN</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr th:each="car : ${allCustomersCars}">

                            <td th:text="${car.getModel().getMake().getMakeName()}"></td>
                            <td th:text="${car.getModel().getModelName()}"></td>
                            <td th:text="${car.getYearOfProduction()}"></td>
                            <td th:text="${car.getLicensePlate()}"></td>
                            <td th:text="${car.vinNumber}"></td>

                        </tr>
                        </tbody>
                    </table>
                </div>


                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
                </div>

            </div>
        </div>
    </div>
</div>


<footer th:replace="fragments/components :: footer"></footer>
<div th:replace="fragments/components :: js"></div>
<script th:src="@{/js/customers.js}"></script>
</body>
</html>